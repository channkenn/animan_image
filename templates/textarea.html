<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>投稿前 テキスト</title>
    <style>
      /* 横並びにするためのスタイル */
      .count-container {
        display: flex;
        gap: 20px; /* アイテム間のスペース */
        justify-content: center; /* 水平方向の中央揃え */
        align-items: center; /* 垂直方向の中央揃え */
      }
    </style>
  </head>
  <body>
    <h2>投稿前 テキスト</h2>
    <textarea
      id="textArea"
      rows="5"
      cols="40"
      placeholder="本文を入力 (最大30行/1000文字まで) クリエイティブではimageURLをコピーした際にアラートはでません"
    ></textarea>
    <br />
    <button id="copyButton">コピーする</button>
    <button id="clearButton">クリア</button>

    <div class="count-container">
      <p>文字数: <span id="charCount">0</span></p>
      <p>行数: <span id="lineCount">1</span></p>
    </div>
    <p id="copyMessage" style="color: green; display: none">
      テキストがコピーされました！
    </p>
    <script>
      // コピーボタンの処理
      document.getElementById("copyButton").addEventListener("click", () => {
        const textArea = document.getElementById("textArea");

        // テキストを選択してコピー
        textArea.select();
        navigator.clipboard
          .writeText(textArea.value)
          .then(() => {
            document.getElementById("copyMessage").style.display = "block";
            setTimeout(() => {
              document.getElementById("copyMessage").style.display = "none";
            }, 2000);
          })
          .catch((err) => {
            console.error("コピーに失敗しました:", err);
          });
      });

      // クリアボタンの処理
      document.getElementById("clearButton").addEventListener("click", () => {
        const textArea = document.getElementById("textArea");
        textArea.value = ""; // テキストエリアを空にする
        updateCount(); // カウントを更新
      });

      // テキストエリアの入力に対して文字数と行数を更新
      document
        .getElementById("textArea")
        .addEventListener("input", updateCount);

      // 文字数と行数をカウントして表示する関数
      function updateCount() {
        const textArea = document.getElementById("textArea");
        const text = textArea.value;

        // 文字数をカウント
        const charCount = text.length;

        // 行数をカウント（改行で分割して行数を計算）
        const lineCount = text.split("\n").length;

        // 文字数と行数を表示
        const charCountSpan = document.getElementById("charCount");
        const lineCountSpan = document.getElementById("lineCount");

        charCountSpan.textContent = charCount;
        lineCountSpan.textContent = lineCount;

        // 文字数が1000以上の場合、赤色に変更
        if (charCount >= 1000) {
          charCountSpan.style.color = "red";
        } else {
          charCountSpan.style.color = "black";
        }

        // 行数が30以上の場合、赤色に変更
        if (lineCount >= 30) {
          lineCountSpan.style.color = "red";
        } else {
          lineCountSpan.style.color = "black";
        }
      }
    </script>
  </body>
</html>
